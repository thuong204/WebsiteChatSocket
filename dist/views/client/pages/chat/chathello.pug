extends ../../layouts/default.pug
block main
    .main-content(myId= user.id).chat-hello
        .row
            .col-xl-3.col-lg-4.col-md-5.col-sm-5.aside-base
                .aside-head.d-flex.justify-content-between.align-items-center
                    .aside-text
                        h3 Chats
                    .aside-tools
                        ul.d-flex.justify-content-center.align-item-center.list-tool-item
                            li.dropdown.d-flex
                                button.btn-link(data-bs-toggle="modal" data-bs-target="#newChat")
                                    img(class="img-tool" src="https://res.cloudinary.com/dsvgomynt/image/upload/v1729692070/aspv69wrdzbkzauwktit.png" width="10" height="10")
                                    span New
                            li.dropdown.d-flex
                                button.btn-link(data-bs-toggle="dropdown" data-bs-offset="0,10")
                                    img(src="https://res.cloudinary.com/dsvgomynt/image/upload/v1729693494/fhd1b5lbxzrjremb3ofo.png" width="10" height="10" alt="" class="img-tool")
                                    span Filter
                                ul(class="dropdown-menu dropdown-menu-end")
                                    li  
                                        a(class="dropdown-item" href="#") All Chat
                                    li  
                                        a(class="dropdown-item" href="#") Active contact
                                    li  
                                        a(class="dropdown-item" href="#") Active chat
                                    li  
                                        a(class="dropdown-item" href="#") Spam message
                                    li  
                                        a(class="dropdown-item" href="#") Trask
                .aside-body
                    .aside-search 
                        .position-relative
                            i.fa-solid.fa-magnifying-glass.position-absolute
                            input(type="search" id="lname" class="form-control me-2 rounded-pill search-contact" placeholder="Search contact/chat" )
                    .tab-content

                        .tab-panel
                            ul.list-aside-item.scrollable-list
                                if (listUsers && listUsers.length > 0)
                                    each user, index in listUsers
                                        li.aside-item-chat.chat-hello(data-user=user._id style="cursor:pointer" room = user.room_id  )
                                            .group-media.d-flex.align-items-center
                                                .media
                                                    img(src= user.avatar ? user.avatar : "https://res.cloudinary.com/dwk6tmsmh/image/upload/v1730014980/ul35qvsq9dt0yqgo0jku.png"  alt="User Image" class="rounded-circle")
                                                .media-col.d-flex.status
                                                    if(user.statusOnline=="online")
                                                        div(class="dot-active")
                                                    else 
                                                        div(class="dot-active d-none")
                                                .media-col.d-flex
                                                    .user-info
                                                        h6 #{user.fullName}
                                                    .user-message
                                                        h6.message Last message preview...
                                                .media-col.d-flex
                                                    span.time 10:30 AM
            .col-xl-9.col-lg-8.col-md-7.col-sm-7
                .welcome-container
                    .welcome-logo 
                        img(src="https://cryptologos.cc/logos/chatcoin-chat-logo.png" width="100px", alt="")
                    .welcome-content
                        h1.title
                            | Chào mừng đến với 
                            span.text-primary Connect Me
                        p.description.text-success
                            | Kết nối bạn bè, khám phá thế giới mới và bắt đầu hành trình của bạn ngay hôm nay!